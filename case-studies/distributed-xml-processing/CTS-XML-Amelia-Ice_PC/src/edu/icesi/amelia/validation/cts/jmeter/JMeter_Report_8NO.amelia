package edu.icesi.amelia.validation.cts.jmeter

import org.amelia.dsl.lib.descriptors.Host
import edu.icesi.amelia.validation.cts.classes.IceInteraction

depends on edu.icesi.amelia.validation.cts.monitors.Monitor_11

subsystem JMeter_Report_8NO
{
	param Integer jmeterMB
	var String meterfileName = "XML-REST-" + jmeterMB + "MB_Ice.jmx"
	param Host hostJmeter
	
	
	param String reportLoc
	param Host hostRabbit
	
	on hostJmeter
	{
		jMeterDirectory:
			cd "/home/carvajal/Documents/carvajal/apache-jmeter-2.13/bin"
		
		call:jMeterDirectory;
			cmd "./jmeter -n -t " + "/home/carvajal/Documents/carvajal/ArchivosJmeterXML/"+meterfileName ... => [withoutTimeout]
			
	}
	
	on hostRabbit
	{
		directory:call;
			
			cd "/home/carvajal/Documents/carvajal/jars"
		
		report:directory;
			
			IceInteraction.runReporterIce("reporter")
	}
	
}