package edu.icesi.amelia.validation.cts.subsystems

import org.amelia.dsl.lib.descriptors.Host
import edu.icesi.amelia.validation.cts.classes.IceInteraction

depends on Monitors

subsystem JMeter_Report_12NO
{
	var String meterfileName = "XML-REST-" + jmeterMB + "MB_Ice.jmx"
	var String reportLoc = "/home/carvajal/Documents/new_Carvajal/REPORTE/"
	
	param Integer jmeterMB
	param Host hostJmeter
	param Host hostRabbit
	
	on hostJmeter
	{
		jMeterDirectory:
			cd "/home/carvajal/Documents/carvajal/apache-jmeter-2.13/bin"
		
		call:jMeterDirectory;
			cmd "./jmeter -n -t " + "/home/carvajal/Documents/carvajal/ArchivosJmeterXML/"+meterfileName ... => [withoutTimeout]
			
	}
	
	on hostRabbit
	{
		directory:call;
			
			cd "/home/carvajal/Documents/carvajal/jars"
		
		report:directory;
			
			IceInteraction.runReporterIce("reporter")
	}
	
}