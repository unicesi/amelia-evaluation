package edu.icesi.amelia.validation.cts.subsystems

import org.amelia.dsl.lib.descriptors.Host

depends on Consumers

subsystem Run_Bridge_Intermediate_Server
{
	
	param Host hostBridgeServer
	param Host hostIntermediate
	param Integer numNodes
	param Integer numComponents
	
	on hostBridgeServer
	{
		directory:
			cd "/home/carvajal/Documents/carvajal/"
		
		executeBridge:directory;
		
			run "procedimientos_bridge" -libpath #[
				"jars/xmlServerRest.jar",
				"lib/org.pascani.dsl.lib-0.0.1-SNAPSHOT-dependencies.jar",
				"lib/new-personalized-events-with-carvajal.jar",
				"lib/ojdbc6.jar",
				"lib/vtd-xml.jar"
				]
				
		executeServer:executeInter;
		
			run "procedimientos_server" -libpath #[
				"jars/xmlServerRest.jar",
				"lib/org.pascani.dsl.lib-0.0.1-SNAPSHOT-dependencies.jar",
				"lib/new-personalized-events-with-carvajal.jar",
				"lib/javax.ws.rs-api-2.0.jar",
				"lib/commons-codec-1.10.jar"
			] 
	}
	
	on hostIntermediate
	{
		directoryInt:
			cd "/home/carvajal/Documents/carvajal/"
		
		executeInter:directoryInt,executeBridge;
		
			run "procedimientos_intermediate_control_"+numNodes+"_"+numComponents -libpath #[
			"jars/xmlIntermedioRest.jar",
			"lib/org.pascani.dsl.lib-0.0.1-SNAPSHOT-dependencies.jar",
			"lib/new-personalized-events-with-carvajal.jar"
			] -s "r" -m "run" ... => [withoutTimeout]
	}
	
	
}