package edu.icesi.amelia.validation.cts.subsystems

import org.amelia.dsl.lib.descriptors.Host

depends on edu.icesi.amelia.validation.cts.monitors.Monitor_13

subsystem JMeter_12NO
{
	
	param Host host
	param Host hostRabbit
	param Integer jmeterMB
	
	var String meterfileName = "XML-REST-" + jmeterMB +"MB.jmx"
	var String reportLoc = "/home/carvajal/Documents/new_Carvajal/REPORTE/"
		
	
	on host
	{
		jMeterDirectory:
			cd "/home/carvajal/Documents/carvajal/apache-jmeter-2.13/bin"
		
		call:jMeterDirectory;
			cmd "./jmeter -n -t " + "/home/carvajal/Documents/carvajal/ArchivosJmeterXML/"+meterfileName ... => [withoutTimeout]
			
	}
	
	on hostRabbit
	{
		directory:call;
			cd "/home/carvajal/Documents/carvajal"
		
		report:directory;
			run "reporter" -libpath #[
					"jars/monitoring.jar",
					"lib/org.pascani.dsl.lib-0.0.1-SNAPSHOT-dependencies.jar",
					"lib/new-personalized-events-with-carvajal.jar",
					"lib/slf4j-api-1.7.10.jar",
					"lib/sigar.jar"
				] -s "generateReports" -m "generateGeneralReport" -p reportLoc ... => [withoutTimeout]
	}
	
}